## Default Security Policy

When a user calls {@link ChatEngine#connect| ```ChatEngine.connect()``` } with a {@link User#uuid | ```UUID``` } parameter, the client SDK calls [PubNub Functions](https://www.pubnub.com/products/functions/) and [Access Manager](https://www.pubnub.com/tutorials/pubnub-access-manager/) features to grant the user access to a set of chat channels by default. Once access is granted, the user’s {@link User#uuid | ```UUID``` } and channel association is stored in PubNub and used for future logins.

```js
ChatEngine.connect('UUID');
```

The method (i.e. {@link ChatEngine#connect| ```ChatEngine.connect()```}) also allows a user to provide an ```authKey```. When an ```authKey``` is provided, the user is granted access to chat channels against the ```UUID``` and ```authKey```. PubNub accepts any ```authKey``` that might be generated by a third party authentication service.

```js
ChatEngine.connect('UUID', {}, 'authKey');
```

By default, each user is granted access to the following channels upon login:


| Channel | Reference      | Sample Format | Default Permissions |
|:-------:|:--------------:|:-------------:|:--------------------|
| Global Channel | {@link ```ChatEngine#.global```} | ```chat-engine``` | ```read```/```write``` access for all users |
| Direct Channel | {@link ```Me#direct```} | ```chat-engine#user#joe#write#direct``` | The user who's {@link ```User#uuid```} matches {@link ```Me#uuid```} has all permissions, while other users only have ```write``` permissions. |
| Feed Channel | {@link ```Me#feed```} | ```chat-engine#user#joe#read#feed``` | The user who's {@link ```User#uuid```} matches {@link ```Me#uuid```} has all permissions, while other users only have ```read``` permissions. |
| Public Channels | {@link ```ChatEngine#chats```} | ```chat-engine#chat#public.#custom-channel``` | ```read```/```write``` access for all users. |
| Private Channels | {@link ```ChatEngine#chats```} | ```chat-engine#chat#private.#private-channel``` | ```read```/```write``` access for all users. |

## Editing Default ```authPolicy()```

At the time of writing, the current ```authPolicy()``` has an open set of permissions. Meaning, a {@link @User| ```user``` }’s ```private```, {@link @User#feed| ```feed``` }, and {@link User#direct| ```direct``` } chats are accessible if a user were to connect to ChatEngine with a user’s {@link User#uuid| ```UUID``` }. In fact, any random {@link User#uuid| ```UUID``` } could be used to access all public chats.

ChatEngine developers may update this ```authPolicy()``` method to introduce stricter access control levels across the ChatEngine user-base.

If additional security controls are required, it is possible to edit the default ```authPolicy()``` by adding logic to the PubNub Function. Since ```authKeys``` are generated by your server, a custom policy can be added to the ```authPolicy()``` method to send a request to a 3rd party server to validate a user’s ```UUID``` and ```authKey```. If the authKey is invalid or expired, the ```authPolicy()``` method can block the {@link ChatEngine#connect| ```ChatEngine.connect()``` } call.

Below steps can be followed to edit the default policy in the PubNub Function.
1. Navigate to the PubNub Admin Portal.
2. Find your ChatEngine app.
3. Locate the ChatEngine PubNub Functions.
4. Edit the ```authPolicy()``` code within the PubNub Function.
5. Save the PubNub Function code and restart the PubNub Module.
